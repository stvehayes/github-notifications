{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { useSSRSafeId } from '@react-aria/ssr';\nimport TextInput from '../TextInput';\nimport Box from '../Box';\nimport { ActionList } from '../deprecated/ActionList';\nimport Spinner from '../Spinner';\nimport { useFocusZone } from '../hooks/useFocusZone';\nimport { useProvidedStateOrCreate } from '../hooks/useProvidedStateOrCreate';\nimport styled from 'styled-components';\nimport { get } from '../constants';\nimport { useProvidedRefOrCreate } from '../hooks/useProvidedRefOrCreate';\nimport useScrollFlash from '../hooks/useScrollFlash';\nimport { scrollIntoView } from '@primer/behaviors';\nconst menuScrollMargins = {\n  startMargin: 0,\n  endMargin: 8\n};\nconst StyledHeader = styled.div.withConfig({\n  displayName: \"FilteredActionList__StyledHeader\",\n  componentId: \"sc-1oqgb0s-0\"\n})([\"box-shadow:0 1px 0 \", \";z-index:1;\"], get('colors.border.default'));\nexport function FilteredActionList(_ref) {\n  let {\n    loading = false,\n    placeholderText,\n    filterValue: externalFilterValue,\n    onFilterChange,\n    items,\n    textInputProps,\n    inputRef: providedInputRef,\n    sx,\n    ...listProps\n  } = _ref;\n  const [filterValue, setInternalFilterValue] = useProvidedStateOrCreate(externalFilterValue, undefined, '');\n  const onInputChange = useCallback(e => {\n    const value = e.target.value;\n    onFilterChange(value, e);\n    setInternalFilterValue(value);\n  }, [onFilterChange, setInternalFilterValue]);\n  const scrollContainerRef = useRef(null);\n  const listContainerRef = useRef(null);\n  const inputRef = useProvidedRefOrCreate(providedInputRef);\n  const activeDescendantRef = useRef();\n  const listId = useSSRSafeId();\n  const onInputKeyPress = useCallback(event => {\n    if (event.key === 'Enter' && activeDescendantRef.current) {\n      event.preventDefault();\n      event.nativeEvent.stopImmediatePropagation(); // Forward Enter key press to active descendant so that item gets activated\n\n      const activeDescendantEvent = new KeyboardEvent(event.type, event.nativeEvent);\n      activeDescendantRef.current.dispatchEvent(activeDescendantEvent);\n    }\n  }, [activeDescendantRef]);\n  useFocusZone({\n    containerRef: listContainerRef,\n    focusOutBehavior: 'wrap',\n    focusableElementFilter: element => {\n      return !(element instanceof HTMLInputElement);\n    },\n    activeDescendantFocus: inputRef,\n    onActiveDescendantChanged: (current, previous, directlyActivated) => {\n      activeDescendantRef.current = current;\n\n      if (current && scrollContainerRef.current && directlyActivated) {\n        scrollIntoView(current, scrollContainerRef.current, menuScrollMargins);\n      }\n    }\n  }, [// List ref isn't set while loading.  Need to re-bind focus zone when it changes\n  loading]);\n  useEffect(() => {\n    // if items changed, we want to instantly move active descendant into view\n    if (activeDescendantRef.current && scrollContainerRef.current) {\n      scrollIntoView(activeDescendantRef.current, scrollContainerRef.current, { ...menuScrollMargins,\n        behavior: 'auto'\n      });\n    }\n  }, [items]);\n  useScrollFlash(scrollContainerRef);\n  return /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    overflow: \"hidden\",\n    sx: sx\n  }, /*#__PURE__*/React.createElement(StyledHeader, null, /*#__PURE__*/React.createElement(TextInput, _extends({\n    ref: inputRef,\n    block: true,\n    width: \"auto\",\n    color: \"fg.default\",\n    value: filterValue,\n    onChange: onInputChange,\n    onKeyPress: onInputKeyPress,\n    placeholder: placeholderText,\n    \"aria-label\": placeholderText,\n    \"aria-controls\": listId\n  }, textInputProps))), /*#__PURE__*/React.createElement(Box, {\n    ref: scrollContainerRef,\n    overflow: \"auto\"\n  }, loading ? /*#__PURE__*/React.createElement(Box, {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    pt: 6,\n    pb: 7\n  }, /*#__PURE__*/React.createElement(Spinner, null)) : /*#__PURE__*/React.createElement(ActionList, _extends({\n    ref: listContainerRef,\n    items: items\n  }, listProps, {\n    role: \"listbox\",\n    id: listId\n  }))));\n}\nFilteredActionList.displayName = \"FilteredActionList\";\nFilteredActionList.displayName = 'FilteredActionList';","map":{"version":3,"sources":["/Users/steve/Documents/repos/notifications/node_modules/@primer/react/lib-esm/FilteredActionList/FilteredActionList.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","useCallback","useEffect","useRef","useSSRSafeId","TextInput","Box","ActionList","Spinner","useFocusZone","useProvidedStateOrCreate","styled","get","useProvidedRefOrCreate","useScrollFlash","scrollIntoView","menuScrollMargins","startMargin","endMargin","StyledHeader","div","withConfig","displayName","componentId","FilteredActionList","loading","placeholderText","filterValue","externalFilterValue","onFilterChange","items","textInputProps","inputRef","providedInputRef","sx","listProps","setInternalFilterValue","undefined","onInputChange","e","value","scrollContainerRef","listContainerRef","activeDescendantRef","listId","onInputKeyPress","event","current","preventDefault","nativeEvent","stopImmediatePropagation","activeDescendantEvent","KeyboardEvent","type","dispatchEvent","containerRef","focusOutBehavior","focusableElementFilter","element","HTMLInputElement","activeDescendantFocus","onActiveDescendantChanged","previous","directlyActivated","behavior","createElement","display","flexDirection","overflow","ref","block","width","color","onChange","onKeyPress","placeholder","justifyContent","pt","pb","role","id"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { useSSRSafeId } from '@react-aria/ssr';\nimport TextInput from '../TextInput';\nimport Box from '../Box';\nimport { ActionList } from '../deprecated/ActionList';\nimport Spinner from '../Spinner';\nimport { useFocusZone } from '../hooks/useFocusZone';\nimport { useProvidedStateOrCreate } from '../hooks/useProvidedStateOrCreate';\nimport styled from 'styled-components';\nimport { get } from '../constants';\nimport { useProvidedRefOrCreate } from '../hooks/useProvidedRefOrCreate';\nimport useScrollFlash from '../hooks/useScrollFlash';\nimport { scrollIntoView } from '@primer/behaviors';\nconst menuScrollMargins = {\n  startMargin: 0,\n  endMargin: 8\n};\nconst StyledHeader = styled.div.withConfig({\n  displayName: \"FilteredActionList__StyledHeader\",\n  componentId: \"sc-1oqgb0s-0\"\n})([\"box-shadow:0 1px 0 \", \";z-index:1;\"], get('colors.border.default'));\nexport function FilteredActionList({\n  loading = false,\n  placeholderText,\n  filterValue: externalFilterValue,\n  onFilterChange,\n  items,\n  textInputProps,\n  inputRef: providedInputRef,\n  sx,\n  ...listProps\n}) {\n  const [filterValue, setInternalFilterValue] = useProvidedStateOrCreate(externalFilterValue, undefined, '');\n  const onInputChange = useCallback(e => {\n    const value = e.target.value;\n    onFilterChange(value, e);\n    setInternalFilterValue(value);\n  }, [onFilterChange, setInternalFilterValue]);\n  const scrollContainerRef = useRef(null);\n  const listContainerRef = useRef(null);\n  const inputRef = useProvidedRefOrCreate(providedInputRef);\n  const activeDescendantRef = useRef();\n  const listId = useSSRSafeId();\n  const onInputKeyPress = useCallback(event => {\n    if (event.key === 'Enter' && activeDescendantRef.current) {\n      event.preventDefault();\n      event.nativeEvent.stopImmediatePropagation(); // Forward Enter key press to active descendant so that item gets activated\n\n      const activeDescendantEvent = new KeyboardEvent(event.type, event.nativeEvent);\n      activeDescendantRef.current.dispatchEvent(activeDescendantEvent);\n    }\n  }, [activeDescendantRef]);\n  useFocusZone({\n    containerRef: listContainerRef,\n    focusOutBehavior: 'wrap',\n    focusableElementFilter: element => {\n      return !(element instanceof HTMLInputElement);\n    },\n    activeDescendantFocus: inputRef,\n    onActiveDescendantChanged: (current, previous, directlyActivated) => {\n      activeDescendantRef.current = current;\n\n      if (current && scrollContainerRef.current && directlyActivated) {\n        scrollIntoView(current, scrollContainerRef.current, menuScrollMargins);\n      }\n    }\n  }, [// List ref isn't set while loading.  Need to re-bind focus zone when it changes\n  loading]);\n  useEffect(() => {\n    // if items changed, we want to instantly move active descendant into view\n    if (activeDescendantRef.current && scrollContainerRef.current) {\n      scrollIntoView(activeDescendantRef.current, scrollContainerRef.current, { ...menuScrollMargins,\n        behavior: 'auto'\n      });\n    }\n  }, [items]);\n  useScrollFlash(scrollContainerRef);\n  return /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    overflow: \"hidden\",\n    sx: sx\n  }, /*#__PURE__*/React.createElement(StyledHeader, null, /*#__PURE__*/React.createElement(TextInput, _extends({\n    ref: inputRef,\n    block: true,\n    width: \"auto\",\n    color: \"fg.default\",\n    value: filterValue,\n    onChange: onInputChange,\n    onKeyPress: onInputKeyPress,\n    placeholder: placeholderText,\n    \"aria-label\": placeholderText,\n    \"aria-controls\": listId\n  }, textInputProps))), /*#__PURE__*/React.createElement(Box, {\n    ref: scrollContainerRef,\n    overflow: \"auto\"\n  }, loading ? /*#__PURE__*/React.createElement(Box, {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    pt: 6,\n    pb: 7\n  }, /*#__PURE__*/React.createElement(Spinner, null)) : /*#__PURE__*/React.createElement(ActionList, _extends({\n    ref: listContainerRef,\n    items: items\n  }, listProps, {\n    role: \"listbox\",\n    id: listId\n  }))));\n}\nFilteredActionList.displayName = \"FilteredActionList\";\nFilteredActionList.displayName = 'FilteredActionList';"]},"metadata":{},"sourceType":"module"}